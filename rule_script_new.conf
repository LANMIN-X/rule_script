# Shadowrocket Config
# Optimized for Tencent EdgeOne (huaban.com)
# Key points:
# - Use system DNS for DIRECT traffic
# - Disable IPv6 to avoid aggressive CDN risk control
# - Keep TUN but avoid Fake-IP / DoH inconsistencies

[General]
bypass-system = true

skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com

tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32,239.255.255.250/32

# Use system DNS to keep DNS / TCP / TLS path consistent
dns-server = system
fallback-dns-server = system

# DIRECT domains must use system DNS
dns-direct-system = true

# Disable IPv6 to avoid EdgeOne high-risk path
ipv6 = false
prefer-ipv6 = false

icmp-auto-reply = true
private-ip-answer = true

dns-direct-fallback-proxy = false

hijack-dns = 8.8.8.8:53,8.8.4.4:53

udp-policy-not-supported-behaviour = REJECT

update-url = https://raw.githubusercontent.com/LANMIN-X/rule_script/main/rule_script.conf

[Proxy]
# (nodes loaded from subscription)

[Proxy Group]
ChatGPT = select,PROXY,香港节点,台湾节点,日本节点,新加坡节点,韩国节点,美国节点
ipsb测试 = select,DIRECT,PROXY
adobe开放 = select,DIRECT,PROXY
adobe屏蔽 = select,DIRECT,REJECT,PROXY
figma = select,DIRECT,PROXY
byte-trae = select,DIRECT,PROXY
无需外网 = select,DIRECT,PROXY
Copilot = select,PROXY
YouTube = select,PROXY
Netflix = select,PROXY
Disney+ = select,PROXY
HBO = select,PROXY
TikTok = select,PROXY
Spotify = select,DIRECT,PROXY
Telegram = select,PROXY
Twitter = select,PROXY
Facebook = select,PROXY
PayPal = select,DIRECT,PROXY
Amazon = select,DIRECT,PROXY
苹果服务 = select,DIRECT,PROXY
谷歌服务 = select,PROXY
微软服务 = select,DIRECT,PROXY
哔哩哔哩 = select,DIRECT,PROXY
游戏平台 = select,DIRECT,PROXY

香港节点 = url-test,policy-regex-filter=HK|Hong|香港
台湾节点 = url-test,policy-regex-filter=TW|Taiwan|台湾
日本节点 = url-test,policy-regex-filter=JP|Japan|日本
新加坡节点 = url-test,policy-regex-filter=SG|Singapore|新加坡
韩国节点 = url-test,policy-regex-filter=KR|Korea|韩国
美国节点 = url-test,policy-regex-filter=US|USA|America|美国

[Rule]
# ---- Tencent EdgeOne / Huaban whitelist ----
DOMAIN,huaban.com,DIRECT
DOMAIN-SUFFIX,huabanimg.com,DIRECT
DOMAIN,t.captcha.qq.com,DIRECT
DOMAIN,captcha.gtimg.com,DIRECT

# ---- Custom rule sets ----
RULE-SET,https://raw.githubusercontent.com/LANMIN-X/rule_script/main/adobe.list,adobe开放
RULE-SET,https://raw.githubusercontent.com/LANMIN-X/rule_script/main/adobe_b.list,adobe屏蔽
RULE-SET,https://raw.githubusercontent.com/LANMIN-X/rule_script/main/ip.sb.list,ipsb测试
RULE-SET,https://raw.githubusercontent.com/LANMIN-X/rule_script/main/figma.list,figma
RULE-SET,https://raw.githubusercontent.com/LANMIN-X/rule_script/main/no.list,无需外网
RULE-SET,https://raw.githubusercontent.com/LANMIN-X/rule_script/main/byte-trae.list,byte-trae

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Apple/Apple.list,苹果服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/BiliBili/BiliBili.list,哔哩哔哩
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/NetEaseMusic/NetEaseMusic.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Baidu/Baidu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouBan/DouBan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouYin/DouYin.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Zhihu/Zhihu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list,DIRECT

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list,YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Netflix/Netflix.list,Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Disney/Disney.list,Disney+
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/HBO/HBO.list,HBO
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,Spotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,Twitter
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,Facebook
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Amazon/Amazon.list,Amazon
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Game/Game.list,游戏平台
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Microsoft/Microsoft.list,微软服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,谷歌服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,TikTok

RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/China/China.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Lan/Lan.list,DIRECT

GEOIP,CN,REJECT
FINAL,REJECT

[Host]
*.apple.com = server:system
*.icloud.com = server:system
localhost = 127.0.0.1

[MITM]
# MITM disabled for domestic sites
hostname =
